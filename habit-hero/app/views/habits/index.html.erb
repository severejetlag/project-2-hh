
<section id="day-tracker" class="container">
	<h1>Daily Tracker</h1>
	<ul>
		<li class="row">
			<div class="col s8">
				<h3>Task</h3>
			</div>
			<div class="col s4">
				<h3>Completed</h3>
			</div>
		</li>
		<% @habits.each_with_index do |habit, i|%>
		<li class="row">
			<div class="col s8">
				<h4><%= habit.title%></h4>
				<% habit.logged_habits.each do |logged_habit| %>
					<!-- Grabbing time zone offset from UTC to lcoal-->
					<% tz_offset = logged_habit.date_completed.localtime.utc_offset %>
					<!-- Converting stored UTC time to local via offset -->
					<% log_time = logged_habit.date_completed + tz_offset %>

					<p><%= logged_habit.date_completed.to_date %> </p>
					<p><%= log_time.to_date %> </p>
					<p><%= DateTime.now.to_date%></p>
					<p><%= log_time.to_date == DateTime.now.to_date ? true : false %> </p>

				<% end %>

				<button><%=link_to "show", show_habit_path(habit)%></button>
			</div>
			<div class="col s4">
				<%= form_with scope: :logged_habit, id: "habit_check#{i}",url: "/logged_habits" do|f|%>
					<div>
						<%= f.hidden_field :habit_id, value: "#{habit.id}"%>
					</div>
					<div>
						<%= f.check_box :checkbox, id: "#{i}",  :onclick => "javascript: document.getElementById('habit_check#{i}').submit();"%>
						<label for="<%=i%>"></label>
					</div>
				<% end %>
			</div>
		</li>
		<% end %>
	</ul>
</section>

<div class="container">

</div>

<button data-target="new-habit-modal" id="new-habit-button" class="btn modal-trigger">Modal</button>
<%= render 'new_habit' %>
